<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="MyTask" basedir="." default="jar">

    <property name="src.dir" value="antsrc"/>
    <property name="classes.dir" value="classes"/>

    <target name="clean" description="Delete all generated files">
        <delete dir="${classes.dir}" failonerror="false"/>
        <delete file="${ant.project.name}.jar"/>
    </target>

    <target name="compile" description="Compiles the Task">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}"/>
    </target>

    <target name="jar" description="JARs the Task" depends="compile">
        <jar destfile="${ant.project.name}.jar" basedir="${classes.dir}"/>
    </target>

    <path id="standard">
        <pathelement location="lib/hamcrest-all-1.3.jar"/>
	<pathelement location="build/KoPeMe.jar"/>
	<pathelement location="."/>
    </path>

    <target name="use" description="Use the Task" depends="jar">
        <taskdef name="KoPeMe" classname="de.kopeme.caller.KoPeMeAntTask" classpath="${ant.project.name}.jar"/>
        <KoPeMe>
	    <classpath refid="standard"/>
	    <fileset dir="Tests/">
	      <include name="**/PerformanzTest.java"/>
	    </fileset>
	</KoPeMe>
    </target>

    <target name="compileJUnut" description="Compiles the Task">
        <mkdir dir="Tests/bin/"/>
        <javac srcdir="Tests/" destdir="Tests/bin/">
	<classpath refid="standard"/>
	</javac>
    </target>

    <target name="use2" description="Use the Task" depends="compileJUnut">
        <junit  printsummary="true">
	   <classpath refid="standard"/>
	   <formatter type="plain"/>
	   <!--<test name="de.moebelhaus.kaufprodukt.tests.PerformanzTestJUnit"/>-->
           <batchtest fork="yes" todir=".">
	    <fileset dir="Tests/bin/" includes="**/*TestJUnit*"/>
	  </batchtest>
        </junit>
    </target>


</project>
